<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async e Await
    </title>
</head>
<body>
    <button onclick="loadPosts()"> Carregar Posts</button>
    <div id="posts">

    </div>
    <script>
     async  function loadPosts() {
            document.getElementById('posts').innerHTML = ' Carregando'

             let req = await fetch('https://jsonplaceholder.typicode.com/posts') // Isso daqui e uma promise mais ele ira fica esperando ela execulta para continuar
             let json = await req.json () // continua esperando e so continua quando tiver o resultado
             montarBlog(json)
        /* O AWAIT nos ajuda a diminuir o codico, no lugar de usar varios .then e cath, invitando repetição, deixando o codigo mais lindo e com a mesma funcionalidade.*/
     }
       function montarBlog(lista){
            let html = '';
            for (let i in lista){
                html += '<h3>'+lista[i].title +'</h3>'
                html += lista[i].body+ '<br/>'
                html += '<hr/>'
            }
            document.getElementById('posts').innerHTML = html


       }
    </script>
</body>
</html>